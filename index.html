<html lang="en-GB">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compass Control: Multi-Object Orientation Control for Text-to-Image Generation</title>
    <meta name="description"
        content="We've presented Clarity, a minimalist and elegant website template for AI research.">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="robots" content="all">
    <meta content="en_EN" property="og:locale">
    <meta content="website" property="og:type">
    <meta content="https://shikun.io/projects/clarity" property="og:url">
    <meta content="Clarity" property="og:title">
    <meta content="Website Template for AI Research" property="og:description">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@your_twitter_id">
    <meta name="twitter:description" content="Clarity: A Minimalist Website Template for AI Research">
    <meta name="twitter:image:src" content="assets/figures/clarity.png">

    <link rel="stylesheet" type="text/css" media="all" href="assets/stylesheets/main_free.css" />
    <link rel="stylesheet" type="text/css" media="all" href="clarity/clarity.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/foundation.min.css">
    <link href="assets/fontawesome-free-6.6.0-web/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/styles.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/index.js"></script>

    <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
    <script src="./static/js/bulma-slider.min.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            "HTML-CSS": {
              scale: 95,
              fonts: ["Gyre-Pagella"],
              imageFont: null,
              undefinedFamily: "'Arial Unicode MS', cmbright"
            },
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                processEscapes: true
              }
          });
    </script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>
        .slider-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
        }

        .sliders-wrapper {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .dynamic-slider {
            width: 200px;
        }
    </style>

    <script>
        // Global Dynamic Slider Initialization
        // (function () {
        //     // Utility function to create slider
        //     function createDynamicSlider(container, config) {
        //         // Default configuration
        //         const defaultConfig = {
        //             prefix: 'slider',
        //             // min: 1,
        //             // max: 10,
        //             default: 1,
        //             // imageFolder: 'images/',
        //             onChange: null,
        //             label: 'Value'
        //         };

        //         // Check for configuration in data attributes
        //         const dataConfig = container.dataset.sliderConfig
        //             ? JSON.parse(container.dataset.sliderConfig)
        //             : {};

        //         // Merge configurations: data attributes > passed config > defaults
        //         const finalConfig = {
        //             ...defaultConfig,
        //             ...config,
        //             ...dataConfig
        //         };

        //         // Create slider elements
        //         const slider = document.createElement('input');
        //         slider.type = 'range';
        //         slider.min = finalConfig.min;
        //         slider.max = finalConfig.max;
        //         slider.value = finalConfig.default;
        //         slider.step = 1;
        //         slider.style.width = '80%';
        //         slider.classList.add('dynamic-global-slider');

        //         const valueDisplay = document.createElement('div');
        //         valueDisplay.innerHTML = `${finalConfig.label}: <span class="slider-value">${finalConfig.default}</span>`;

        //         const imageElement = document.createElement('img');
        //         let imgName = finalConfig.default.toString()
        //         imgName = imgName.padStart(3, "0")
        //         // console.log("the fucking imgName is") 
        //         // console.log(imgName) 
        //         imageElement.src = `${finalConfig.imageFolder}${imgName}.jpg`;
        //         // console.log("here")
        //         // console.log(imageElement.src) 
        //         imageElement.style.width = '80%';
        //         imageElement.style.marginTop = '20px';
        //         imageElement.classList.add('slider-image');
        //         imageElement.alt = `${finalConfig.prefix} Image`;

        //         // Append elements to container
        //         container.innerHTML = ''; // Clear existing content
        //         container.appendChild(slider);
        //         container.appendChild(valueDisplay);
        //         container.appendChild(imageElement);

        //         // Add event listener
        //         slider.addEventListener('input', function () {
        //             const currentValue = slider.value;

        //             // Update value display
        //             valueDisplay.querySelector('.slider-value').textContent = currentValue;

        //             // Update image source
        //             let imgName = currentValue.toString()
        //             imgName = imgName.padStart(3, "0")
        //             // console.log("the fucking imgName is") 
        //             // console.log(imgName) 
        //             imageElement.src = `${finalConfig.imageFolder}${imgName}.jpg`;

        //             // Call custom onChange handler if provided
        //             if (typeof finalConfig.onChange === 'function') {
        //                 finalConfig.onChange(currentValue);
        //             }
        //         });

        //         // Return the slider for additional manipulation if needed
        //         return slider;
        //     }

        //     // Global function to initialize sliders
        //     window.initializeDynamicSlider = function (selector, config = {}) {
        //         const containers = document.querySelectorAll(selector);

        //         containers.forEach(container => {
        //             // Check if already initialized
        //             if (container.getAttribute('data-slider-initialized') === 'true') return;

        //             // Mark as initialized
        //             container.setAttribute('data-slider-initialized', 'true');
        //             container.classList.add('dynamic-slider-container');

        //             // Create slider using both HTML config and passed config
        //             createDynamicSlider(container, config);
        //         });
        //     };

        //     // Auto-initialize on DOM load
        //     document.addEventListener('DOMContentLoaded', function () {
        //         // Auto-initialize sliders, respecting their individual configurations
        //         window.initializeDynamicSlider('.dynamic-slider');
        //     });
        // })();
        // Global Dynamic Slider Initialization
        // Global Dynamic Multi-Slider Image Control
        (function () {
            // Utility function to create slider
            function createDynamicSlider(container, config) {
                // Default configuration
                const defaultConfig = {
                    prefix: 'slider',
                    min: 1,
                    max: 5,
                    default: 1,
                    label: 'Value',
                    imageGroup: 'default'
                };

                // Check for configuration in data attributes
                const dataConfig = container.dataset.sliderConfig
                    ? JSON.parse(container.dataset.sliderConfig)
                    : {};

                // Merge configurations: data attributes > passed config > defaults
                const finalConfig = {
                    ...defaultConfig,
                    ...config,
                    ...dataConfig
                };

                // Create slider elements
                const slider = document.createElement('input');
                slider.type = 'range';
                slider.min = finalConfig.min;
                slider.max = finalConfig.max;
                slider.value = finalConfig.default;
                slider.step = 1;
                slider.style.width = '80%';
                slider.classList.add('dynamic-global-slider');

                // Add image group identifier
                slider.dataset.imageGroup = finalConfig.imageGroup;

                const valueDisplay = document.createElement('div');
                valueDisplay.innerHTML = `${finalConfig.label}: <span class="slider-value">${finalConfig.default}</span>`;

                // Append elements to container
                container.innerHTML = ''; // Clear existing content
                container.appendChild(slider);
                container.appendChild(valueDisplay);

                // Add event listener
                slider.addEventListener('input', function () {
                    const currentValue = slider.value;

                    // Update value display
                    valueDisplay.querySelector('.slider-value').textContent = currentValue;

                    // Trigger global image update
                    updateGroupImage(finalConfig.imageGroup);
                });

                // Return the slider for additional manipulation if needed
                return slider;
            }

            // Global image update function
            function updateGroupImage(imageGroup) {
                // Find the target image for this group
                const targetImage = document.querySelector(`img[data-image-group="${imageGroup}"]`);
                if (!targetImage) return;

                // Find all sliders for this image group
                const groupSliders = document.querySelectorAll(
                    `.dynamic-global-slider[data-image-group="${imageGroup}"]`
                );

                // Construct image path based on slider values
                const sliderValues = Array.from(groupSliders).map(slider => slider.value);
                const imagePath = constructImagePath(imageGroup, sliderValues);

                // Update image source
                targetImage.src = imagePath;
            }

            // Function to construct image path based on slider values
            function constructImagePath(imageGroup, sliderValues) {
                // Default image construction logic
                // You can customize this based on your specific image naming convention
                const paddedSliderValues = sliderValues.map(value => value.toString().padStart(3, "0"));
                imgName = `clarity/images/${imageGroup}/${paddedSliderValues.join('__')}.jpg`
                console.log("the imageName is")
                console.log(imgName)
                return imgName;
            }

            // Global function to initialize sliders
            window.initializeDynamicSlider = function (selector, config = {}) {
                const containers = document.querySelectorAll(selector);

                containers.forEach(container => {
                    // Check if already initialized
                    if (container.getAttribute('data-slider-initialized') === 'true') return;

                    // Mark as initialized
                    container.setAttribute('data-slider-initialized', 'true');
                    container.classList.add('dynamic-slider-container');

                    // Create slider using both HTML config and passed config
                    createDynamicSlider(container, config);
                });
            };

            // Auto-initialize on DOM load
            document.addEventListener('DOMContentLoaded', function () {
                // Auto-initialize sliders, respecting their individual configurations
                window.initializeDynamicSlider('.dynamic-slider');
            });
        })();
    </script>
</head>

<body>
    <!-- Title Page -->
    <!-- Dark Theme Example: Change the background colour dark and change the following div "blog-title" into "blog-title white". -->
    <div class="container blog" id="first-content" style="background-color: #fcf0f3;">
        <!-- If you don't have a project cover: Change "blog-title" into "blog-title no-cover"  -->
        <div class="blog-title">
            <div class="blog-intro">
                <div>
                    <h1 class="title">Compass Control: Multi-Object Orientation Control for Text-to-Image Generation
                    </h1>
                    <h2 class="title">CVPR 2025</h2>
                    <p class="author">Rishubh Parihar, Vaibhav Agarwal, Sachidanand VS, R. Venkatesh Babu</p>
                    <p class="abstract">
                        Compass control enables precise and continuous object orientation control in text-to-image diffusion models. 
                        Given an input orientation angle along with a text prompt, our method can generate realistic scenes following the text prompts
                        with object-centric orientation control. 
                    </p>

                </div>

                <div class="info">
                    <div>
                        <a href="mainpaper.pdf" class="button icon" style="background-color: rgba(255, 255, 255, 0.25); margin-bottom: 0;">Paper<i class="fa-solid fa-book-open"></i></a>
                        <a href="https://github.com/lorenmt/clarity-template" class="button icon" style="background-color: rgba(255, 255, 255, 0.25); margin-bottom: 0;">Code (coming soon)<i class="fa-solid fa-code"></i></a>
                    </div>
                </div>
            </div>

            <div class="blog-cover">
                <!-- <img class="foreground" src="assets/figures/teaser.svg", style="width: 375px; height: auto;">
                <img class="background" src="assets/figures/teaser.svg", style="width: 400px; height: auto;">  -->
                <!-- <img class="foreground" src="assets/figures/temp-teaser.png", style="width: 500px;"> -->
                <video 
                    src="assets/figures/teaser.mp4" 
                    controls 
                    style="border: 2px solid rgb(237, 223, 223); border-radius: 15px; box-shadow: 0px 0px 10px #999; padding: 5px; width: 600px; height: auto;">
                </video>
                <!-- <img class="background" src="assets/figures/teaser.svg"> -->
            </div>
        </div>
    </div>


    <!-- Image Display -->

    <div class="container blog main">
        <h1 class="text" , style="text-align: center;">
            Abstract
        </h1>

        <p class="text" , style="text-align: justify;">
        We address the problem of multi-object orientation control in text-to-image diffusion models,
        enabling precise orientation control for diverse multi-object scenes. The key idea is to
        condition the diffusion model with a set of orientation-aware <b>compass</b> tokens, one for
        each object, along with text tokens. These compass tokens are predicted by a light-weight
        encoder. The model is trained on a synthetic dataset of procedurally generated scenes, each
        containing one or two 3D-assets. However, directly training this framework results in poor
        orientation control as well as leads to entanglement among objects. To mitigate this, we
        constrain the cross-attention maps of each compass token to its corresponding object regions.
        The trained model is able to achieve precise orientation control for a) complex objects not seen
        during training, and b) multi-object scenes with more than two objects, indicating strong
        generalization capabilities. Further, when combined with personalization methods, our method
        precisely controls the orientation of the new object in diverse contexts.
        </p>
    </div>

    <div class="container blog extra-large gray-linear">
        <h1 class="text" , style="text-align: center;">
            Take Control!
        </h1>
        <p class="text" , style="text-align: center;">
            Adjust the sliders to control the orientation of the objects in the scene! <br><br>
        </p>
        <div class="columns-2">
            <div>
                <img data-image-group="bicycle" src="clarity/images/bicycle/001.jpg" alt="bicycle"
                    style="max-width: 300px; margin-bottom: 20px;">


                <!-- Accessory Slider -->
                <div class="dynamic-slider" data-slider-config='{
                     "prefix": "accessory", 
                     "min": 1, 
                     "max": 8, 
                     "default": 1, 
                     "label": "bicycle", 
                     "imageGroup": "bicycle"
                 }'>
                </div>
            </div>

            <div>
                <img data-image-group="jeep" src="clarity/images/jeep/001.jpg" alt="jeep"
                    style="max-width: 300px; margin-bottom: 20px;">


                <!-- Accessory Slider -->
                <div class="dynamic-slider" data-slider-config='{
                     "prefix": "accessory", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "jeep", 
                     "imageGroup": "jeep"
                 }'>
                </div>
            </div>
        </div>
    </div>


    <!-- Approach discussion and the approach figure -->
    <div class="container blog main">
        <h1 class="text" , style="text-align: center;">
            Approach
        </h1>

        <p class="text" , style="text-align: justify;">
        We encode the object orientation as an additional attribute in the text embedding space of the T2I model. 
        Specifically, we introduce a special token, dubbed as <b> compass</b> token <b>c</b> along with each token in the prompt 
        (e.g.,`A photo of <b>c1</b> SUV and <b>c2</b> sedan on a road.'). Each <b> compass</b> token is predicted by a lightweight encoder model taking the prescribed 
        orientation angle as input. This formulation preserves the original interface of the base T2I model and enables 
        precise object-centric orientation control in multi-object scenes. We train the encoder model and fine-tune the denoising U-Net with LoRA 
        on a synthetic dataset of scenes containing one or two 3D assets placed in diverse layouts on an empty floor. 
        </p>
    </div>

    <div class="container blog main gray">
        <img src="assets/figures/method.svg" , style="max-width: 400px; margin-bottom: 20px;">
    </div>


    <!-- Additional static results with multiple objects from the main paper -->
    <div class="container blog main">
        <h1 class="text" , style="text-align: center;">
            Interactive Results
        </h1>


        <p class="text" , style="text-align: justify;">
            Some interactive results where you can control the object orienations with the help of sliders.
            Note that the proposed method allows for disentangled control of objects while preserving the orientation of
            other objects.
        </p>


        <div class="columns-3">
            <div>
                <img data-image-group="sedan__sedan__sedan__sedan"
                    src="clarity/images/sedan__sedan__sedan__sedan/001.jpg" alt="sedan__suv"
                    style="max-width: 300px; margin-bottom: 20px;">

                <!-- Sliders Wrapper -->
                <div class="sliders-wrapper">
                    <div class="dynamic-slider" data-slider-config='{
                     "prefix": "slider", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "highlighted sedan", 
                     "imageGroup": "sedan__sedan__sedan__sedan"
                 }'>
                    </div>
                </div>
            </div>

            <div>
                <img data-image-group="sedan__fortuner"
                    src="clarity/images/sedan__fortuner/001.jpg" alt="sedan__fortuner"
                    style="max-width: 300px; margin-bottom: 20px;">

                <!-- Sliders Wrapper -->
                <div class="sliders-wrapper">
                    <div class="dynamic-slider" data-slider-config='{
                     "prefix": "slider", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "suv", 
                     "imageGroup": "sedan__fortuner"
                 }'>
                    </div>
                </div>
            </div>

            <div>
                <img data-image-group="skoda__suv"
                    src="clarity/images/skoda__suv/001.jpg" alt="skoda__suv"
                    style="max-width: 300px; margin-bottom: 20px;">

                <!-- Sliders Wrapper -->
                <div class="sliders-wrapper">
                    <div class="dynamic-slider" data-slider-config='{
                     "prefix": "slider", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "sedan", 
                     "imageGroup": "skoda__suv"
                 }'>
                    </div>
                </div>
            </div>

            <!-- <div>
                <img data-image-group="sedan__suv" src="clarity/images/sedan__suv/001__001.jpg" alt="sedan__suv"
                    style="max-width: 300px; margin-bottom: 20px;">

                <div class="sliders-wrapper">
                    <div class="dynamic-slider" data-slider-config='{
                     "prefix": "pose", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "sedan", 
                     "imageGroup": "sedan__suv"
                 }'>
                    </div>

                    <div class="dynamic-slider" data-slider-config='{
                     "prefix": "accessory", 
                     "min": 1, 
                     "max": 6, 
                     "default": 1, 
                     "label": "suv", 
                     "imageGroup": "sedan__suv"
                 }'>
                    </div>
                </div>
            </div> -->
        </div>
    </div>

    <!-- <div class="container blog main gray">
        <img src="clarity/images/bicycle/001.jpg" , style="max-width: 400px; margin-bottom: 20px;">
    </div> -->

    <!-- Additional static results with multiple objects from the main paper -->

    <div class="container blog extra-large main gray">
        <h1 class="text" , style="text-align: center;">
            Main results
        </h1> 
        <img src="assets/figures/main-results-still.svg" ,>
        <!-- style="max-width: 1200px; margin-bottom: 20px;"> -->
    </div>

    <!-- Additional static results with multiple objects from the main paper -->
    <div class="container blog main">
        <h1 class="text" , style="text-align: center;">
            Personalization
        </h1>

        <p class="text" , style="text-align: justify;">
            Given a few (~10) input images of an object, we can personalize the text-to-image model and generate the
            given subject with precise pose control in diverse contexts.
        </p>
    </div>

    <div class="container blog extra-large main gray">
        <img src="assets/figures/personlize-still.svg" ,>
        <!-- style="max-width: 1200px; margin-bottom: 20px;"> -->
    </div>





    <!-- Footer Page -->
    <footer>
        <div class="container">
            <p>
                This website is built on the <a href="https://shikun.io/projects/clarity">Clarity Template</a>, designed
                by <a href="https://shikun.io/">Shikun Liu</a>.
            </p>
        </div>
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="clarity/clarity.js"></script>
    <script src="assets/scripts/main.js"></script>

</html>
</body>
